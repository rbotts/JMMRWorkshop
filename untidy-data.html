<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Untidy Data | SIGMAA Stat Ed Mini-course for JMM 2020: Teaching Reproducible Statistics with R and R Studio</title>
  <meta name="description" content="A short workshop in R." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Untidy Data | SIGMAA Stat Ed Mini-course for JMM 2020: Teaching Reproducible Statistics with R and R Studio" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A short workshop in R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Untidy Data | SIGMAA Stat Ed Mini-course for JMM 2020: Teaching Reproducible Statistics with R and R Studio" />
  
  <meta name="twitter:description" content="A short workshop in R." />
  

<meta name="author" content="Judith E. Canner &amp; Ryan Botts" />


<meta name="date" content="2020-01-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="teaching-students-and-you-how-to-get-help.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#welcome"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#purpose"><i class="fa fa-check"></i>Purpose</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#downloading-software"><i class="fa fa-check"></i>Downloading software</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-we-are"><i class="fa fa-check"></i>Who we are</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="rstudio-environment.html"><a href="rstudio-environment.html"><i class="fa fa-check"></i><b>1</b> RStudio Environment</a><ul>
<li class="chapter" data-level="1.1" data-path="rstudio-environment.html"><a href="rstudio-environment.html#importing-data"><i class="fa fa-check"></i><b>1.1</b> Importing data</a></li>
<li class="chapter" data-level="1.2" data-path="rstudio-environment.html"><a href="rstudio-environment.html#command-line"><i class="fa fa-check"></i><b>1.2</b> Command line</a></li>
<li class="chapter" data-level="1.3" data-path="rstudio-environment.html"><a href="rstudio-environment.html#scripts-and-notebooks"><i class="fa fa-check"></i><b>1.3</b> Scripts and Notebooks</a></li>
<li class="chapter" data-level="1.4" data-path="rstudio-environment.html"><a href="rstudio-environment.html#loading-packages"><i class="fa fa-check"></i><b>1.4</b> Loading Packages</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rmarkdown-and-reproducible-documentation.html"><a href="rmarkdown-and-reproducible-documentation.html"><i class="fa fa-check"></i><b>2</b> RMarkdown and Reproducible Documentation</a><ul>
<li class="chapter" data-level="2.1" data-path="rmarkdown-and-reproducible-documentation.html"><a href="rmarkdown-and-reproducible-documentation.html#r-rstudio-and-rmarkdown"><i class="fa fa-check"></i><b>2.1</b> R, RStudio, and RMarkdown</a></li>
<li class="chapter" data-level="2.2" data-path="rmarkdown-and-reproducible-documentation.html"><a href="rmarkdown-and-reproducible-documentation.html#communication-with-rmarkdown"><i class="fa fa-check"></i><b>2.2</b> Communication with RMarkdown</a></li>
<li class="chapter" data-level="2.3" data-path="rmarkdown-and-reproducible-documentation.html"><a href="rmarkdown-and-reproducible-documentation.html#learning-more-about-r-markdown"><i class="fa fa-check"></i><b>2.3</b> Learning More about R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html"><i class="fa fa-check"></i><b>3</b> Teaching R and Statistics Together</a><ul>
<li class="chapter" data-level="3.1" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#the-grammar-of-graphics-for-data-visualization"><i class="fa fa-check"></i><b>3.1</b> The Grammar of Graphics for Data Visualization</a><ul>
<li class="chapter" data-level="3.1.1" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#geometry"><i class="fa fa-check"></i><b>3.1.1</b> Geometry</a></li>
<li class="chapter" data-level="3.1.2" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#aesthetics"><i class="fa fa-check"></i><b>3.1.2</b> Aesthetics</a></li>
<li class="chapter" data-level="3.1.3" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#data"><i class="fa fa-check"></i><b>3.1.3</b> Data</a></li>
<li class="chapter" data-level="3.1.4" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#visualization-using-base-r-graphics"><i class="fa fa-check"></i><b>3.1.4</b> Visualization using base R graphics</a></li>
<li class="chapter" data-level="3.1.5" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#scatterplots"><i class="fa fa-check"></i><b>3.1.5</b> Scatterplots</a></li>
<li class="chapter" data-level="3.1.6" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#bar-graphs"><i class="fa fa-check"></i><b>3.1.6</b> Bar graphs</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#what-is-a-package"><i class="fa fa-check"></i><b>3.2</b> What is a package?</a></li>
<li class="chapter" data-level="3.3" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#package-ggplot2"><i class="fa fa-check"></i><b>3.3</b> Package ggplot2</a><ul>
<li class="chapter" data-level="3.3.1" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#layering-graphics"><i class="fa fa-check"></i><b>3.3.1</b> Layering Graphics</a></li>
<li class="chapter" data-level="3.3.2" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#additional-resources"><i class="fa fa-check"></i><b>3.3.2</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#statistical-inference"><i class="fa fa-check"></i><b>3.4</b> Statistical Inference</a><ul>
<li class="chapter" data-level="3.4.1" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#linear-regression"><i class="fa fa-check"></i><b>3.4.1</b> Linear Regression</a></li>
<li class="chapter" data-level="3.4.2" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#t-tests"><i class="fa fa-check"></i><b>3.4.2</b> t-tests</a></li>
<li class="chapter" data-level="3.4.3" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#using-simulation-to-teach-reinforce-concepts"><i class="fa fa-check"></i><b>3.4.3</b> Using simulation to teach reinforce concepts</a></li>
<li class="chapter" data-level="3.4.4" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#tools-for-resampling"><i class="fa fa-check"></i><b>3.4.4</b> Tools for resampling</a></li>
<li class="chapter" data-level="3.4.5" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#other-tools-commonly-found-in-introductory-statistics-courses"><i class="fa fa-check"></i><b>3.4.5</b> Other tools commonly found in introductory statistics courses</a></li>
<li class="chapter" data-level="3.4.6" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#paired-t-test"><i class="fa fa-check"></i><b>3.4.6</b> Paired t-test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html"><i class="fa fa-check"></i><b>4</b> R across the curriculum</a><ul>
<li class="chapter" data-level="4.1" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#pedagogy-for-programming"><i class="fa fa-check"></i><b>4.1</b> Pedagogy for Programming</a><ul>
<li class="chapter" data-level="4.1.1" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#why-is-r-so-scary"><i class="fa fa-check"></i><b>4.1.1</b> Why is R so scary?</a></li>
<li class="chapter" data-level="4.1.2" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#getting-started-with-r-in-the-classroom"><i class="fa fa-check"></i><b>4.1.2</b> Getting Started with R in the Classroom</a></li>
<li class="chapter" data-level="4.1.3" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#additional-resources-1"><i class="fa fa-check"></i><b>4.1.3</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#examples-assignments-and-projects"><i class="fa fa-check"></i><b>4.2</b> Examples, assignments, and projects</a><ul>
<li class="chapter" data-level="4.2.1" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#first-labs"><i class="fa fa-check"></i><b>4.2.1</b> First labs</a></li>
<li class="chapter" data-level="4.2.2" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#in-class-usage"><i class="fa fa-check"></i><b>4.2.2</b> In-class usage</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#r-packages-for-teaching-and-learning"><i class="fa fa-check"></i><b>4.3</b> R Packages for Teaching and Learning</a><ul>
<li class="chapter" data-level="4.3.1" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#base-r-vs.packages-for-learning"><i class="fa fa-check"></i><b>4.3.1</b> Base R vs. Packages for Learning</a></li>
<li class="chapter" data-level="4.3.2" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#package-mosaic"><i class="fa fa-check"></i><b>4.3.2</b> Package mosaic</a></li>
<li class="chapter" data-level="4.3.3" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#package-ggformula"><i class="fa fa-check"></i><b>4.3.3</b> Package ggformula</a></li>
<li class="chapter" data-level="4.3.4" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#package-infer"><i class="fa fa-check"></i><b>4.3.4</b> Package infer</a></li>
<li class="chapter" data-level="4.3.5" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#packages-for-learning-r---swirl"><i class="fa fa-check"></i><b>4.3.5</b> Packages for Learning R - Swirl</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="teaching-students-and-you-how-to-get-help.html"><a href="teaching-students-and-you-how-to-get-help.html"><i class="fa fa-check"></i><b>5</b> Teaching students (and you) how to get help</a></li>
<li class="chapter" data-level="6" data-path="untidy-data.html"><a href="untidy-data.html"><i class="fa fa-check"></i><b>6</b> Untidy Data</a><ul>
<li class="chapter" data-level="6.1" data-path="untidy-data.html"><a href="untidy-data.html#tidy-data"><i class="fa fa-check"></i><b>6.1</b> Tidy Data</a><ul>
<li class="chapter" data-level="6.1.1" data-path="untidy-data.html"><a href="untidy-data.html#example---cleaning-the-tesla-data"><i class="fa fa-check"></i><b>6.1.1</b> Example - Cleaning the Tesla Data</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="untidy-data.html"><a href="untidy-data.html#miscellany-on-data-types-in-r"><i class="fa fa-check"></i><b>6.2</b> Miscellany on data types in R</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">SIGMAA Stat Ed Mini-course for JMM 2020: Teaching Reproducible Statistics with R and R Studio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="untidy-data" class="section level1">
<h1><span class="header-section-number">6</span> Untidy Data</h1>
<div id="tidy-data" class="section level2">
<h2><span class="header-section-number">6.1</span> Tidy Data</h2>
<blockquote>
<p>“Happy families are all alike; every unhappy family is unhappy in its own way.” –– Leo Tolstoy</p>
</blockquote>
<blockquote>
<p>“Tidy datasets are all alike, but every messy dataset is messy in its own way.” –– Hadley Wickham</p>
</blockquote>
<p>R works best with “tidy data”. There are three interrelated rules which make a dataset tidy:</p>
<ol style="list-style-type: decimal">
<li>Each variable must have its own column.<br />
</li>
<li>Each observation must have its own row.<br />
</li>
<li>Each value must have its own cell.</li>
</ol>
<p><a href="Images/tidy/tidy-1.png">R for Data Science</a></p>
<p>Most data does not start out “tidy”. Fortunately, the <code>tidyverse</code> was designed to help with the process of turning messy data into tidy data. Packages such as <code>dplyr</code>, <code>tidyr</code>, <code>lubridate</code>, <code>forcats</code>, and <code>stringr</code> allow the user to clean up data and eventually turn it into nice and tidy data.</p>
<p>It would be impossible to teach you how to clean data in all circumstances in the 15 minutes we have, but I wanted to overview the grammar of data cleaning for you. The functions in <code>tidyr</code> and <code>dplyr</code> mimic the grammar of data cleaning to make it easy to learn.</p>
<ul>
<li>Select - choose specific columns<br />
</li>
<li>Filter - choose specific rows<br />
</li>
<li>Sort/Arrange - order the rows in the columns<br />
</li>
<li>Mutate - add a new column</li>
</ul>
<div class="figure">
<img src="Images/tidy/ActionsSingleTable.png" alt="from Winona State" />
<p class="caption">from Winona State</p>
</div>
<ul>
<li>Join - join two data tables together</li>
</ul>
<div class="figure">
<img src="Images/tidy/join.png" alt="from Winona State" />
<p class="caption">from Winona State</p>
</div>
<ul>
<li>Gather - gather column names that are values instead of variables into a single column<br />
</li>
<li>Spread - spread out observation values to new column variables with they are spread across multiple rows</li>
</ul>
<div class="figure">
<img src="Images/tidy/spreadgather.png" alt="from Winona State" />
<p class="caption">from Winona State</p>
</div>
<p>The best way to learn to clean data is to clean data! I highly recommend working through <a href="https://r4ds.had.co.nz/">R for Data Science</a> and the exercises included (<a href="https://r4ds.had.co.nz/">here are the solutions</a>).</p>
<p>In addition to navigating the shape of the data, there are often fun surprises within the data even with technically “tidy”. You might have character strings that are messy and contain information that needs to be extracted (use <code>stringr</code>), or dates (use <code>lubridate</code>), or that need to be specified as ordered factors (use <code>forcats</code>). <code>base</code> R will often make decisions for you when reading in data as well. To avoid that, use <code>readr</code> to specify variable/data types when reading in the data to save a headache later!</p>
<div id="example---cleaning-the-tesla-data" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Example - Cleaning the Tesla Data</h3>
<p>The Tesla data was actually “tidy” in format, but had a lot of dates (in multiple formats) and strings that needed some massaging. Here is what I did (more could be done!) to get the data ready for your use.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readr)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(stringr)
<span class="kw">library</span>(lubridate)
tesla&lt;-<span class="kw">read_csv</span>(<span class="st">&quot;Data/TeslaBatterySurvey2018.csv&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tesla <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">BatteryAgeDays=</span><span class="st">`</span><span class="dt">Battery AgeDays</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">DailyChargeLevel=</span><span class="kw">as.numeric</span>(<span class="kw">str_sub</span>(DailyChargeLevel,<span class="dv">1</span>,<span class="dv">2</span>))) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Location=</span><span class="kw">str_replace_all</span>(tesla<span class="op">$</span>Location,<span class="st">&quot;uK&quot;</span>, <span class="st">&quot;UK&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ReadDate=</span><span class="kw">parse_date_time</span>(ReadDate, <span class="kw">c</span>(<span class="st">&quot;%d-%b-%y&quot;</span>, <span class="st">&quot;%m/%d/%Y&quot;</span>, <span class="st">&quot;%d. %b %Y&quot;</span>),<span class="dt">exact=</span><span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ManufactureDate=</span><span class="kw">parse_date_time</span>(ManufactureDate, 
                                         <span class="kw">c</span>(<span class="st">&quot;%d-%b-%y&quot;</span>, <span class="st">&quot;%m/%d/%Y&quot;</span>, <span class="st">&quot;%d. %b %Y&quot;</span>),<span class="dt">exact=</span><span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ModelXS=</span><span class="kw">str_split</span>(Model,<span class="st">&quot; &quot;</span>, <span class="dt">simplify =</span> <span class="ot">TRUE</span>)[,<span class="dv">2</span>], 
         <span class="dt">ModNum=</span><span class="kw">str_split</span>(Model,<span class="st">&quot; &quot;</span>,<span class="dt">simplify =</span> <span class="ot">TRUE</span>)[,<span class="dv">3</span>]) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">write_csv</span>(<span class="st">&quot;cleanTeslaBattery.csv&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">newtesla&lt;-<span class="kw">read.csv</span>(<span class="st">&quot;cleanTeslaBattery.csv&quot;</span>)
<span class="kw">str</span>(newtesla)</code></pre></div>
<pre><code>&#39;data.frame&#39;:   1339 obs. of  20 variables:
 $ Location         : Factor w/ 4 levels &quot;Asia Pacific &amp; Europe (excl UK)&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
 $ ManufactureDate  : Factor w/ 388 levels &quot;2012-09-12T00:00:00Z&quot;,..: 233 121 256 215 191 304 274 176 349 NA ...
 $ ReadDate         : Factor w/ 769 levels &quot;2014-03-27T00:00:00Z&quot;,..: 169 219 444 457 472 477 542 535 539 611 ...
 $ AgeInDays        : int  45 520 387 556 653 187 475 839 36 42965 ...
 $ Model            : Factor w/ 24 levels &quot;Model 3 LR&quot;,&quot;Model S 100D&quot;,..: 9 3 10 9 9 9 10 9 4 8 ...
 $ MileageKM        : int  2800 10500 34653 45959 37895 16800 49129 49900 2271 3000 ...
 $ MileagePerDay    : num  60.9 20.2 89.3 82.5 57.9 ...
 $ MaxRangeKM       : int  246 180 256 231 238 242 266 239 205 239 ...
 $ ReplacementBatt  : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 1 1 1 1 1 1 1 1 1 ...
 $ MileageSinceNewKM: int  2800 10500 34653 45959 37895 16800 49129 49900 2271 3000 ...
 $ BatteryAgeDays   : int  46 521 388 557 654 188 476 840 37 NA ...
 $ WattHoursPerKM   : num  323 353 345 379 358 318 320 323 NA 305 ...
 $ OriginalRangeKM  : int  249 180 267 249 249 249 267 249 207 242 ...
 $ SuperchargeFreq  : Factor w/ 8 levels &quot;a few times a year&quot;,..: 6 5 2 8 1 3 8 3 NA NA ...
 $ MaxChargeFreq    : Factor w/ 8 levels &quot;a few times a year&quot;,..: 3 1 3 5 3 1 4 1 NA NA ...
 $ RunToEmptyFreq   : Factor w/ 7 levels &quot;a few times a year&quot;,..: 4 4 1 3 3 3 3 3 NA NA ...
 $ DailyChargeLevel : int  80 70 90 70 80 90 80 80 NA NA ...
 $ Cycles           : num  11.7 63.4 156.6 231.8 179 ...
 $ ModelXS          : Factor w/ 4 levels &quot;3&quot;,&quot;85&quot;,&quot;S&quot;,&quot;X&quot;: 3 3 3 3 3 3 3 3 3 3 ...
 $ ModNum           : Factor w/ 18 levels &quot;100D&quot;,&quot;60&quot;,&quot;60D&quot;,..: 8 2 9 8 8 8 9 8 3 7 ...</code></pre>
</div>
</div>
<div id="miscellany-on-data-types-in-r" class="section level2">
<h2><span class="header-section-number">6.2</span> Miscellany on data types in R</h2>
<p>R has several built-in data types that you may find useful:</p>
<p><em>Vector</em>, like arrays in other languages, a collection of entries, each with the same type of data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span><span class="op">:</span><span class="dv">4</span></code></pre></div>
<pre><code>[1] 1 2 3 4</code></pre>
<p><em>Lists</em> with mixed data types</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list</span>(<span class="st">&quot;28&quot;</span>,<span class="dv">14</span>)</code></pre></div>
<pre><code>[[1]]
[1] &quot;28&quot;

[[2]]
[1] 14</code></pre>
<p><em>Matrices</em> for storing data of all the same type:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> A =<span class="st"> </span><span class="kw">matrix</span>( 
   <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">2</span>, <span class="dv">1</span>), <span class="co"># the data elements </span>
   <span class="dt">nrow=</span><span class="dv">2</span>,              <span class="co"># number of rows </span>
   <span class="dt">ncol=</span><span class="dv">3</span>,              <span class="co"># number of columns </span>
   <span class="dt">byrow =</span> <span class="ot">TRUE</span>)        <span class="co"># specify to fill in across the rows or down the columns</span></code></pre></div>
<p>Note that we have been using data frames that can be built from the ground up.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weight =<span class="st"> </span><span class="kw">c</span>(<span class="dv">55</span>,<span class="dv">33</span>,<span class="dv">21</span>,<span class="dv">19</span>)
height =<span class="st"> </span><span class="kw">c</span>(<span class="dv">67</span>,<span class="dv">41</span>,<span class="dv">35</span>,<span class="dv">24</span>)
pet =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;cat&quot;</span>,<span class="st">&quot;dog&quot;</span>,<span class="st">&quot;cat&quot;</span>,<span class="st">&quot;lizard&quot;</span>)
dat =<span class="st"> </span><span class="kw">data.frame</span>(height,weight, pet)
<span class="kw">summary</span>(dat)</code></pre></div>
<pre><code>     height          weight         pet   
 Min.   :24.00   Min.   :19.0   cat   :2  
 1st Qu.:32.25   1st Qu.:20.5   dog   :1  
 Median :38.00   Median :27.0   lizard:1  
 Mean   :41.75   Mean   :32.0             
 3rd Qu.:47.50   3rd Qu.:38.5             
 Max.   :67.00   Max.   :55.0             </code></pre>
<p>Note that entries in data frames can be accessed much as the way they are in other languages. Try each of the following. What do each of them do?</p>
<pre><code>dat[1,2]
dat[,2]
dat[2:3,]
dat[c(1,4),]
dat[,&quot;weight&quot;]
dat[,c(&quot;height&quot;,&quot;pet&quot;)]
dat[-2,]</code></pre>
<p>One of the other incredibly handy features is that rows can also be selected based on various criteria. We can select the rows where the pet is a cat using the command or the weight of the rows where the pet is a cat using the following two commands:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat[dat<span class="op">$</span>pet<span class="op">==</span><span class="st">&quot;cat&quot;</span>,]</code></pre></div>
<pre><code>  height weight pet
1     67     55 cat
3     35     21 cat</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat[dat<span class="op">$</span>pet<span class="op">==</span><span class="st">&quot;cat&quot;</span>,<span class="st">&quot;weight&quot;</span>]</code></pre></div>
<pre><code>[1] 55 21</code></pre>
<p>R also casts vectors to apply arithmetic operations to lists and also allows dynamic variable assignment in data frames. Below we will rescale the weight by multiplying by 16 and save it in the column new height</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat<span class="op">$</span>newheight =<span class="st"> </span>dat<span class="op">$</span>height <span class="op">*</span><span class="dv">16</span>
dat</code></pre></div>
<pre><code>  height weight    pet newheight
1     67     55    cat      1072
2     41     33    dog       656
3     35     21    cat       560
4     24     19 lizard       384</code></pre>
<p>This can be handy for normalizing and transforming data. Note there is also a <em>scale</em> function for rescaling data.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="teaching-students-and-you-how-to-get-help.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
