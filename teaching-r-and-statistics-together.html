<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Teaching R and Statistics Together | SIGMAA Stat Ed Mini-course for JMM 2020: Teaching Reproducible Statistics with R and R Studio</title>
  <meta name="description" content="A short workshop in R." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Teaching R and Statistics Together | SIGMAA Stat Ed Mini-course for JMM 2020: Teaching Reproducible Statistics with R and R Studio" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A short workshop in R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Teaching R and Statistics Together | SIGMAA Stat Ed Mini-course for JMM 2020: Teaching Reproducible Statistics with R and R Studio" />
  
  <meta name="twitter:description" content="A short workshop in R." />
  

<meta name="author" content="Judith E. Canner &amp; Ryan Botts" />


<meta name="date" content="2020-01-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rmarkdown-and-reproducible-documentation.html"/>
<link rel="next" href="r-across-the-curriculum.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#welcome"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#purpose"><i class="fa fa-check"></i>Purpose</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#data-and-notebooks"><i class="fa fa-check"></i><b>0.1</b> Data and Notebooks</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#downloading-software"><i class="fa fa-check"></i>Downloading software</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-we-are"><i class="fa fa-check"></i>Who we are</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="rstudio-environment.html"><a href="rstudio-environment.html"><i class="fa fa-check"></i><b>1</b> RStudio Environment</a><ul>
<li class="chapter" data-level="1.1" data-path="rstudio-environment.html"><a href="rstudio-environment.html#importing-data"><i class="fa fa-check"></i><b>1.1</b> Importing data</a></li>
<li class="chapter" data-level="1.2" data-path="rstudio-environment.html"><a href="rstudio-environment.html#command-line"><i class="fa fa-check"></i><b>1.2</b> Command line</a></li>
<li class="chapter" data-level="1.3" data-path="rstudio-environment.html"><a href="rstudio-environment.html#scripts-and-notebooks"><i class="fa fa-check"></i><b>1.3</b> Scripts and Notebooks</a></li>
<li class="chapter" data-level="1.4" data-path="rstudio-environment.html"><a href="rstudio-environment.html#loading-packages"><i class="fa fa-check"></i><b>1.4</b> Loading Packages</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rmarkdown-and-reproducible-documentation.html"><a href="rmarkdown-and-reproducible-documentation.html"><i class="fa fa-check"></i><b>2</b> RMarkdown and Reproducible Documentation</a><ul>
<li class="chapter" data-level="2.1" data-path="rmarkdown-and-reproducible-documentation.html"><a href="rmarkdown-and-reproducible-documentation.html#r-rstudio-and-rmarkdown"><i class="fa fa-check"></i><b>2.1</b> R, RStudio, and RMarkdown</a></li>
<li class="chapter" data-level="2.2" data-path="rmarkdown-and-reproducible-documentation.html"><a href="rmarkdown-and-reproducible-documentation.html#communication-with-rmarkdown"><i class="fa fa-check"></i><b>2.2</b> Communication with RMarkdown</a></li>
<li class="chapter" data-level="2.3" data-path="rmarkdown-and-reproducible-documentation.html"><a href="rmarkdown-and-reproducible-documentation.html#learning-more-about-r-markdown"><i class="fa fa-check"></i><b>2.3</b> Learning More about R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html"><i class="fa fa-check"></i><b>3</b> Teaching R and Statistics Together</a><ul>
<li class="chapter" data-level="3.1" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#the-grammar-of-graphics-for-data-visualization"><i class="fa fa-check"></i><b>3.1</b> The Grammar of Graphics for Data Visualization</a><ul>
<li class="chapter" data-level="3.1.1" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#geometry"><i class="fa fa-check"></i><b>3.1.1</b> Geometry</a></li>
<li class="chapter" data-level="3.1.2" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#aesthetics"><i class="fa fa-check"></i><b>3.1.2</b> Aesthetics</a></li>
<li class="chapter" data-level="3.1.3" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#data"><i class="fa fa-check"></i><b>3.1.3</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#visualization-using-base-r-graphics"><i class="fa fa-check"></i><b>3.2</b> Visualization using base R graphics</a><ul>
<li class="chapter" data-level="3.2.1" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#histograms-and-boxplots"><i class="fa fa-check"></i><b>3.2.1</b> Histograms and boxplots</a></li>
<li class="chapter" data-level="3.2.2" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#scatterplots"><i class="fa fa-check"></i><b>3.2.2</b> Scatterplots</a></li>
<li class="chapter" data-level="3.2.3" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#bar-graphs"><i class="fa fa-check"></i><b>3.2.3</b> Bar graphs</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#what-is-a-package"><i class="fa fa-check"></i><b>3.3</b> What is a package?</a></li>
<li class="chapter" data-level="3.4" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#package-ggplot2"><i class="fa fa-check"></i><b>3.4</b> Package ggplot2</a><ul>
<li class="chapter" data-level="3.4.1" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#layering-graphics"><i class="fa fa-check"></i><b>3.4.1</b> Layering Graphics</a></li>
<li class="chapter" data-level="3.4.2" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#additional-resources"><i class="fa fa-check"></i><b>3.4.2</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#statistical-inference"><i class="fa fa-check"></i><b>3.5</b> Statistical Inference</a><ul>
<li class="chapter" data-level="3.5.1" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#linear-regression"><i class="fa fa-check"></i><b>3.5.1</b> Linear Regression</a></li>
<li class="chapter" data-level="3.5.2" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#t-tests"><i class="fa fa-check"></i><b>3.5.2</b> t-tests</a></li>
<li class="chapter" data-level="3.5.3" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#using-simulation-to-teach-reinforce-concepts"><i class="fa fa-check"></i><b>3.5.3</b> Using simulation to teach reinforce concepts</a></li>
<li class="chapter" data-level="3.5.4" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#tools-for-resampling"><i class="fa fa-check"></i><b>3.5.4</b> Tools for resampling</a></li>
<li class="chapter" data-level="3.5.5" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#other-tools-commonly-found-in-introductory-statistics-courses"><i class="fa fa-check"></i><b>3.5.5</b> Other tools commonly found in introductory statistics courses</a></li>
<li class="chapter" data-level="3.5.6" data-path="teaching-r-and-statistics-together.html"><a href="teaching-r-and-statistics-together.html#paired-t-test"><i class="fa fa-check"></i><b>3.5.6</b> Paired t-test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html"><i class="fa fa-check"></i><b>4</b> R across the curriculum</a><ul>
<li class="chapter" data-level="4.1" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#pedagogy-for-programming"><i class="fa fa-check"></i><b>4.1</b> Pedagogy for Programming</a><ul>
<li class="chapter" data-level="4.1.1" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#why-is-r-so-scary"><i class="fa fa-check"></i><b>4.1.1</b> Why is R so scary?</a></li>
<li class="chapter" data-level="4.1.2" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#getting-started-with-r-in-the-classroom"><i class="fa fa-check"></i><b>4.1.2</b> Getting Started with R in the Classroom</a></li>
<li class="chapter" data-level="4.1.3" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#additional-resources-1"><i class="fa fa-check"></i><b>4.1.3</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#examples-assignments-and-projects"><i class="fa fa-check"></i><b>4.2</b> Examples, assignments, and projects</a><ul>
<li class="chapter" data-level="4.2.1" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#first-labs"><i class="fa fa-check"></i><b>4.2.1</b> First labs</a></li>
<li class="chapter" data-level="4.2.2" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#in-class-usage"><i class="fa fa-check"></i><b>4.2.2</b> In-class usage</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#r-packages-for-teaching-and-learning"><i class="fa fa-check"></i><b>4.3</b> R Packages for Teaching and Learning</a><ul>
<li class="chapter" data-level="4.3.1" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#base-r-vs.packages-for-learning"><i class="fa fa-check"></i><b>4.3.1</b> Base R vs. Packages for Learning</a></li>
<li class="chapter" data-level="4.3.2" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#package-mosaic"><i class="fa fa-check"></i><b>4.3.2</b> Package mosaic</a></li>
<li class="chapter" data-level="4.3.3" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#package-ggformula"><i class="fa fa-check"></i><b>4.3.3</b> Package ggformula</a></li>
<li class="chapter" data-level="4.3.4" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#package-infer"><i class="fa fa-check"></i><b>4.3.4</b> Package infer</a></li>
<li class="chapter" data-level="4.3.5" data-path="r-across-the-curriculum.html"><a href="r-across-the-curriculum.html#packages-for-learning-r---swirl"><i class="fa fa-check"></i><b>4.3.5</b> Packages for Learning R - Swirl</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="teaching-students-and-you-how-to-get-help.html"><a href="teaching-students-and-you-how-to-get-help.html"><i class="fa fa-check"></i><b>5</b> Teaching students (and you) how to get help</a></li>
<li class="chapter" data-level="6" data-path="untidy-data.html"><a href="untidy-data.html"><i class="fa fa-check"></i><b>6</b> Untidy Data</a><ul>
<li class="chapter" data-level="6.1" data-path="untidy-data.html"><a href="untidy-data.html#tidy-data"><i class="fa fa-check"></i><b>6.1</b> Tidy Data</a><ul>
<li class="chapter" data-level="6.1.1" data-path="untidy-data.html"><a href="untidy-data.html#example---cleaning-the-tesla-data"><i class="fa fa-check"></i><b>6.1.1</b> Example - Cleaning the Tesla Data</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="untidy-data.html"><a href="untidy-data.html#miscellany-on-data-types-in-r"><i class="fa fa-check"></i><b>6.2</b> Miscellany on data types in R</a><ul>
<li class="chapter" data-level="6.2.1" data-path="untidy-data.html"><a href="untidy-data.html#example---cleaning-the-tesla-data-1"><i class="fa fa-check"></i><b>6.2.1</b> Example - Cleaning the Tesla Data</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="untidy-data.html"><a href="untidy-data.html#miscellany-on-data-types-in-r-1"><i class="fa fa-check"></i><b>6.3</b> Miscellany on data types in R</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">SIGMAA Stat Ed Mini-course for JMM 2020: Teaching Reproducible Statistics with R and R Studio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="teaching-r-and-statistics-together" class="section level1">
<h1><span class="header-section-number">3</span> Teaching R and Statistics Together</h1>
<p>One of the challenges for teaching R is that students want to get started right away without thinking about what the output should look like and what their goal actually is with programming. Encouraging students to stop and think will help them determine the best approach in R.</p>
<div id="the-grammar-of-graphics-for-data-visualization" class="section level2">
<h2><span class="header-section-number">3.1</span> The Grammar of Graphics for Data Visualization</h2>
<p>Open up the the R Notebook for <a href="PracticeNotebooks/DataVizPractice.Rmd">Data Visualization</a> and follow along.</p>
<p>A data visualization is a set of visual <strong>geometries</strong> whose <strong>aesthetics</strong> are mapped from data.</p>
<div id="geometry" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Geometry</h3>
<ul>
<li>A geometry is a visual entity in space.<br />
</li>
<li>Some common geometries encountered in data visualizations:
<ul>
<li>Point<br />
</li>
<li>Line<br />
</li>
<li>Bar</li>
</ul></li>
</ul>
</div>
<div id="aesthetics" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Aesthetics</h3>
<ul>
<li>An aesthetic is a visual attribute of a geometry<br />
</li>
<li>Common aesthetics:
<ul>
<li>Position on horizontal (X)<br />
</li>
<li>Position on vertical (Y)<br />
</li>
<li>Shape<br />
</li>
<li>Size<br />
</li>
<li>Color
<ul>
<li>Hue<br />
</li>
<li>Saturation (“intensity”)<br />
</li>
<li>Value (“brightness”)<br />
</li>
</ul></li>
<li>Text</li>
</ul></li>
</ul>
<div class="figure">
<img src="Images/common-aesthetics-1.png" alt="https://serialmentor.com/dataviz/aesthetic-mapping.html" />
<p class="caption"><a href="https://serialmentor.com/dataviz/aesthetic-mapping.html" class="uri">https://serialmentor.com/dataviz/aesthetic-mapping.html</a></p>
</div>
<ul>
<li>Not all aesthetics are available for every geometry</li>
</ul>
</div>
<div id="data" class="section level3">
<h3><span class="header-section-number">3.1.3</span> Data</h3>
<ul>
<li>To visualize, must have data in row-by-column format where:
<ul>
<li>Rows represent cases: at most one geometry per case (assuming no aggregation)<br />
</li>
<li>Columns represent variables: to be mapped to aesthetic attributes</li>
</ul></li>
</ul>
<div class="figure">
<img src="Images/tidy-1.png" alt="https://r4ds.had.co.nz/tidy-data.html#tidy-data-1" />
<p class="caption"><a href="https://r4ds.had.co.nz/tidy-data.html#tidy-data-1" class="uri">https://r4ds.had.co.nz/tidy-data.html#tidy-data-1</a></p>
</div>
<ul>
<li>Differences in geometry aesthetics map to differences in data variables<br />
</li>
<li>Available mappings depend on whether data variable is continuous (height) or discrete (race)<br />
</li>
<li>The following caveats apply:
<ul>
<li>An aesthetic attribute can be mapped back to at most one variable<br />
</li>
<li>A variable can be mapped to more than one aesthetic<br />
</li>
<li>Not all mappings make sense</li>
</ul></li>
</ul>
<blockquote>
<p>Students often do not recognize that a categorical variable is already summarized and confuse the count/frequency for a quantitative variable rather than a statistic.</p>
</blockquote>
</div>
</div>
<div id="visualization-using-base-r-graphics" class="section level2">
<h2><span class="header-section-number">3.2</span> Visualization using base R graphics</h2>
<p>The base graphics often provide a very simple way for students to get plots quickly and explore data. We will continue using the <code>cleanTeslaBattery</code> data. Load it now and view it. (cleanTeslaBattery data)[Data/cleanTeslaBattery.csv]</p>
<div id="histograms-and-boxplots" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Histograms and boxplots</h3>
<p>One wonderful thing about R is how intuitive the functions are, if you want a mean, the command is <code>mean</code>, if you want a boxplot, the command is <code>boxplot</code>.</p>
<p>Run the command <code>boxplot(cleanTeslaBattery$MaxRangeKM)</code>. You should get the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(cleanTeslaBattery<span class="op">$</span>MaxRangeKM)</code></pre></div>
<p><img src="figures/unnamed-chunk-7-1.png" width="672" /> The x- and y-axis labels, main title, as well as color can be set using optional variables, xlab, ylab, main and color, respectively. Modify your command to <code>boxplot(cleanTeslaBattery$MaxRangeKM, xlab = &quot;All&quot;, ylab = &quot;KM&quot;, main = &quot;Max Range&quot;, col = &quot;green&quot;)</code>. R has many other colors built in and also accepts hexadecimals. Search the web to find some other possible colors to modify your graph.</p>
<p>Replacing <code>boxplot()</code> with <code>hist</code> will give the expected effect. Try it on one of the other quantitative variables.</p>
<ul>
<li><p>Note that histograms have an optional argument to control how many bins called breaks. Try adding the option ‘breaks = 50’</p></li>
<li><p>Set the number of breaks to 5, notice anything strange?</p></li>
<li><p>Set your histogram to another color</p></li>
</ul>
<p>One other feature that is nice is that comparisons between quantitative variables can easily be done as well. Suppose we want to compare the maximum range based on how frequently they supercharge their batteries. Enter the command</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(MaxRangeKM <span class="op">~</span><span class="st"> </span>SuperchargeFreq, <span class="dt">data =</span> cleanTeslaBattery, <span class="dt">las =</span> <span class="dv">2</span>)</code></pre></div>
<p><img src="figures/unnamed-chunk-9-1.png" width="672" /></p>
<ul>
<li>Note the relational notation <code>y ~ x</code></li>
<li><p>In many functions we can specify the data set to avoid extra typing</p></li>
<li><p>The <code>las</code> argument specifies turning the axis labels 90 degrees</p></li>
<li><p>The optional axis labels are as before</p></li>
<li><p>Colors can still be specified, but now we need a list of colors, one for each box. Add the optional argument <code>col = heat.colors(8)</code>. Note you must specify one for each category. There are many color palettes. You can view some with the command <code>?colors</code>.</p></li>
</ul>
<blockquote>
<p>Teaching tip: One of the most common problems students run into here is not putting the variables in the correct order in the ‘y ~ x’</p>
</blockquote>
</div>
<div id="scatterplots" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Scatterplots</h3>
<p>Scatterplots follow a very similar syntax as doing side-by-side boxplots, but using the <code>plot</code> function and replacing the qualitative explanatory variable with a quantitative one. Let’s explore the effect of Mileage (<code>MileageKM</code>) and the Maximum Range (<code>MaxRangeKM</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(MaxRangeKM <span class="op">~</span><span class="st"> </span>MileageKM, <span class="dt">data =</span> cleanTeslaBattery, <span class="dt">col =</span> <span class="st">&quot;darkblue&quot;</span>)</code></pre></div>
<p><img src="figures/unnamed-chunk-10-1.png" width="672" /></p>
<p>Note that the type of point can be controlled using the optional <code>pch = 2</code> command and changing the number for different point types. Color and labels are done as before. Try adjusting your colors and labeling your plot.</p>
<p>Another nice alternative for large data sets is the <code>smoothScatter</code>, however it doesn’t support the specification of data and will require explicitly referring to the x and y using the data frame name and ‘$’ symbol. Try it if you are interested.</p>
<p>Clearly this graph shows multiple trends due to the different battery sizes, so we would want to separate these out separately for regression or use a more advanced regression model. For simplicity we are going to add a regression line without accounting for the car model.</p>
<p>Regression lines are implemented using the following process:</p>
<ol style="list-style-type: decimal">
<li>Fit and save the model to the data using <code>lm()</code> (x and y are specified as in the plot). This model is used for all other steps.</li>
<li>Add the line to the scatterplot that has already been created using <code>abline()</code> applied to the model you have saved. Colors for the line can be specified as before.</li>
<li>Summarize the model using <code>summary()</code>.</li>
</ol>
<p>Try it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(MaxRangeKM <span class="op">~</span><span class="st"> </span>MileageKM, <span class="dt">data =</span> cleanTeslaBattery, <span class="dt">col =</span> <span class="st">&quot;darkblue&quot;</span>)
line =<span class="st"> </span><span class="kw">lm</span>(MaxRangeKM <span class="op">~</span><span class="st"> </span>MileageKM, <span class="dt">data =</span> cleanTeslaBattery)
<span class="kw">abline</span>(line, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</code></pre></div>
<p><img src="figures/unnamed-chunk-11-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(line)</code></pre></div>
<pre><code>
Call:
lm(formula = MaxRangeKM ~ MileageKM, data = cleanTeslaBattery)

Residuals:
     Min       1Q   Median       3Q      Max 
-186.380   -4.404   14.744   28.588  149.153 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 3.598e+02  2.389e+00 150.597   &lt;2e-16 ***
MileageKM   3.313e-05  3.442e-05   0.962    0.336    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 58.81 on 1336 degrees of freedom
  (1 observation deleted due to missingness)
Multiple R-squared:  0.0006928, Adjusted R-squared:  -5.522e-05 
F-statistic: 0.9262 on 1 and 1336 DF,  p-value: 0.336</code></pre>
<blockquote>
<p>Teaching tip Students frequently forget to create the plot first. The entire R chunk must be run in RMarkdown to preview the image.</p>
</blockquote>
<p>The correlation can be computed using the <code>cor</code> function. Look up how to use it using <code>?cor</code> and try it.</p>
</div>
<div id="bar-graphs" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Bar graphs</h3>
<p>Categorical data isn’t much harder, but does require a preprocessing step for base graphics. Let’s create a boxplot of the Supercharging Frequency. We will go straight to grouped bar plots. Let’s summarize the relationship between supercharging frequency and the location. This is done in three steps:</p>
<ol style="list-style-type: decimal">
<li>tabulate (using <code>table</code>, stored as <code>tble</code>)</li>
<li>compute conditional percentages (<code>prop.table</code>, stored as <code>ptable</code>)</li>
<li>plot (<code>barplot</code>)</li>
</ol>
<p>Try it:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tble =<span class="st"> </span><span class="kw">table</span>(cleanTeslaBattery<span class="op">$</span>SuperchargeFreq, cleanTeslaBattery<span class="op">$</span>Location)
ptable =<span class="st"> </span><span class="kw">prop.table</span>(tble,<span class="dv">2</span>)
<span class="kw">barplot</span>(ptable, <span class="dt">beside =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="figures/unnamed-chunk-12-1.png" width="672" /> Note the organization of the table and the relationship between the rows and columns.</p>
<p>We can also add a legend and a location with the options <code>legend.text = TRUE</code> and <code>args.legend = list(x = &quot;topright&quot;)</code>.</p>
<p>Try adding them to your plot.</p>
<p>Note, there are many options for the placement of the legend other than “topright” that you may want to use if the legend overlaps your bars. These include “bottomright”, “bottom”, “bottomleft”, “left”, “topleft”, “top”, “topright”, “right”, and “center.”</p>
<p>Set the main title and colors (the number of colors should be the same as the number of rows in the table). A quick way to get the number of colors is to count the number of levels of a factor. You can replace the count with <code>length(levels(vblname))</code>, and substitute your <code>vblname</code>.</p>
<p>A bar plot for a single variable can be accomplished by only passing in one variable. Try it on one of the other categorical variables.</p>
</div>
</div>
<div id="what-is-a-package" class="section level2">
<h2><span class="header-section-number">3.3</span> What is a package?</h2>
<p>Packages are collections of R functions, data, and compiled code in a well-defined format. The directory where packages are stored is called the library. R comes with a standard set of packages, called the base package. Others are available for download and installation.<br />
<img src="Images/dataviz/packagesdiagram.png" alt="CC RStudio" /></p>
<p>Packages that are curated, maintained, and reviewed are stored on the CRAN (Comprehensive R Archive Network).<br />
<img src="Images/dataviz/cran.png" alt="CC RStudio" /></p>
<p>Once installed, packages have to be loaded into the session to use the functions stored within the package.<br />
<img src="Images/dataviz/Rpackages.png" alt="CC RStudio" /></p>
<p>If you ever need R to do something that is not obvious, there is probably a package for that. Many packages also provide vignettes or publish background and examples in the <a href="https://www.jstatsoft.org/index">Journal of Statistical Software</a>.</p>
<p>One of the more popular packages of packages is the <code>tidyverse</code>, which includes packages such as <code>dplyr</code>, <code>ggplot2</code>, and <code>readr</code> which make using R for data cleaning, graphics, and data science. We will explore a few of these packages today, starting with <code>ggplot2</code> and the grammar of graphics.</p>
</div>
<div id="package-ggplot2" class="section level2">
<h2><span class="header-section-number">3.4</span> Package ggplot2</h2>
<p>The package <code>ggplot2</code> stands for grammar of graphic plots. It works to layer details onto a graphic map data to specific aesthetics using specific geometries. If you have not already done so, install the <code>ggplot2</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</code></pre></div>
<p>Open up the the R Notebook for <a href="PracticeNotebooks/DataVizPractice.Rmd">Data Visualization</a> and follow along.</p>
<p>Now load the package into R using either <code>library()</code> or <code>require()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)</code></pre></div>
<p>Let’s make a graphic for the Tesla data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tesla&lt;-<span class="kw">read.csv</span>(<span class="st">&quot;Data/cleanTeslaBattery.csv&quot;</span>)</code></pre></div>
<p><strong>Your Turn 1</strong> Talk in a group - what relationship do you expect to see in the <code>tesla</code> data between the age of the battery (<code>Battery AgeDays</code>) and the amount of mileage put on the car since the battery was installed (<code>MileageSinceNewKM</code>)? (No peeking!)</p>
<p>Run the following code in your notebook to make a graph, paying strict attention to spelling, capitalization, and parentheses.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data=</span>tesla) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>BatteryAgeDays, <span class="dt">y=</span>MileageSinceNewKM))</code></pre></div>
<p><img src="figures/unnamed-chunk-16-1.png" width="672" /></p>
<p>Notice a few key things.</p>
<ol style="list-style-type: decimal">
<li><code>ggplot(data)</code> initializes the plot<br />
</li>
<li>adding a <code>+</code> after a line of ggplot code adds a new layer<br />
</li>
<li>start with the geometry<br />
</li>
<li>then specify the aesthetics</li>
</ol>
<p>Here is a similar graphic code with annotation. <img src="Images/dataviz/ggplotdiagram.png" alt="CC by RStudio" /></p>
<p>Therefore, you can use this code template to make thousands of graphs with <strong>ggplot2</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="op">&lt;</span>DATA<span class="op">&gt;</span>) <span class="op">+</span>
<span class="st">  </span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>))</code></pre></div>
<p>Let’s add on some more layers! What if we want to make the variable Replacement Battery to a color aesthetic?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data=</span>tesla) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>BatteryAgeDays, <span class="dt">y=</span>MileageSinceNewKM, <span class="dt">color=</span>ReplacementBatt))</code></pre></div>
<p><img src="figures/unnamed-chunk-18-1.png" width="672" /></p>
<p>If we didn’t care about mapping the new variable to an aesthetic, but wanted to change the color, that would come outside of the <code>aes()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data=</span>tesla) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>BatteryAgeDays, <span class="dt">y=</span>MileageSinceNewKM), <span class="dt">color=</span><span class="st">&quot;blue&quot;</span>)</code></pre></div>
<p><img src="figures/unnamed-chunk-19-1.png" width="672" /></p>
<p>There are a lot of resources available, including a the <a href="Documents/ggplot2_Cheatsheet.pdf">“ggplot2 Cheatsheet”</a></p>
<p><strong>Your Turn 2</strong> Make the following density plot, using the Cheatsheet to help you. What does the plot tell you about the Tesla driver habits in different regions?</p>
<p><img src="figures/unnamed-chunk-20-1.png" width="672" /></p>
<div id="layering-graphics" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Layering Graphics</h3>
<p>To get a better idea about how <code>ggplot2</code> layers aesthetics and and specific geometries onto a graphic, check out <a href="https://evamaerey.github.io/ggplot_flipbook/ggplot_flipbook_xaringan.html#1">the ggplot flipbook</a> which demonstrates how each layer modifies the graphic.</p>
</div>
<div id="additional-resources" class="section level3">
<h3><span class="header-section-number">3.4.2</span> Additional Resources</h3>
<p>There are a lot of resources for <code>ggplot2</code>, here are three good places to start:</p>
<ol style="list-style-type: decimal">
<li><p>The <a href="http://r4ds.had.co.nz/data-visualisation.html">data visualisation</a> and <a href="http://r4ds.had.co.nz/graphics-for-communication.html">graphics for communication</a> chapters in R for data science. R for data science is designed to give you a comprehensive introduction to the <code>tidyverse</code>, and these two chapters will you get up to speed with the essentials of <code>ggplot2</code> as quickly as possible.</p></li>
<li><p>If you’d like to take an online course, try <a href="http://shop.oreilly.com/product/0636920052807.do">Data Visualization in R With ggplot2</a> by Kara Woo.</p></li>
<li><p>If you want to dive into making common graphics as quickly as possible, I recommend <a href="http://amzn.to/2dVfMfn">The R Graphics Cookbook</a> by Winston Chang. It provides a set of recipes to solve common graphics problems.</p></li>
</ol>
<p>If you’ve mastered the basics and want to learn more, read <a href="http://amzn.to/2fncG50">ggplot2: Elegant Graphics for Data Analysis</a>. It describes the theoretical underpinnings of <code>ggplot2</code> and shows you how all the pieces fit together. This book helps you understand the theory that underpins <code>ggplot2</code>, and will help you create new types of graphics specifically tailored to your needs. The book is not available for free, but you can find the complete source for the book at <a href="https://github.com/hadley/ggplot2-book" class="uri">https://github.com/hadley/ggplot2-book</a>.</p>
</div>
</div>
<div id="statistical-inference" class="section level2">
<h2><span class="header-section-number">3.5</span> Statistical Inference</h2>
<p>In this section we will cover some of the basic tools for statistical inference covered in an introductory statistics class.</p>
<p>A notebook to work along is found in <a href="PracticeNotebooks/InferenceNotebook.RMD">notebook for inference</a></p>
<div id="linear-regression" class="section level3">
<h3><span class="header-section-number">3.5.1</span> Linear Regression</h3>
<p>Let’s go back to the Tesla Battery Data from earlier. We did linear regression when we added the regression line earlier, but now we will explore some of the other available tools with regression.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cleanTeslaBattery =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/cleanTeslaBattery.csv&quot;</span>)</code></pre></div>
<p>Here is a look at a scatterplot of the data</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
<span class="kw">ggplot</span>(<span class="dt">data=</span>cleanTeslaBattery) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x=</span>MileageKM, <span class="dt">y=</span>WattHoursPerKM))</code></pre></div>
<p><img src="figures/unnamed-chunk-22-1.png" width="672" /></p>
<p>Implement the linear model from before to look at the relationship between the Mileage (<code>MileageKM</code>) and Watt Hours Per KM (<code>WattHoursPerKM</code>) and assign the model to the variable <code>mod</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod =<span class="st"> </span><span class="kw">lm</span>(WattHoursPerKM <span class="op">~</span><span class="st"> </span>MileageKM, <span class="dt">data =</span> cleanTeslaBattery)
<span class="kw">summary</span>(mod)</code></pre></div>
<pre><code>
Call:
lm(formula = WattHoursPerKM ~ MileageKM, data = cleanTeslaBattery)

Residuals:
    Min      1Q  Median      3Q     Max 
-80.060 -26.278 -11.197   8.352 206.763 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  2.439e+02  1.743e+00 139.901  &lt; 2e-16 ***
MileageKM   -1.766e-04  2.500e-05  -7.063 2.63e-12 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 42.5 on 1315 degrees of freedom
  (22 observations deleted due to missingness)
Multiple R-squared:  0.03655,   Adjusted R-squared:  0.03582 
F-statistic: 49.89 on 1 and 1315 DF,  p-value: 2.628e-12</code></pre>
<p>We can also easily inspect the residuals by calling the <code>residual()</code> function on the model. Try it:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(<span class="kw">residuals</span>(mod))</code></pre></div>
<p><img src="figures/unnamed-chunk-24-1.png" width="672" /></p>
<p>Additionally transforms of any of the variables can be performed in the following way:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lm</span>(WattHoursPerKM <span class="op">~</span><span class="st"> </span><span class="kw">log</span>(MileageKM), <span class="dt">data =</span> cleanTeslaBattery)</code></pre></div>
<pre><code>
Call:
lm(formula = WattHoursPerKM ~ log(MileageKM), data = cleanTeslaBattery)

Coefficients:
   (Intercept)  log(MileageKM)  
        286.59           -5.02  </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lm</span>(<span class="kw">sqrt</span>(WattHoursPerKM) <span class="op">~</span><span class="st"> </span>MileageKM, <span class="dt">data =</span> cleanTeslaBattery)</code></pre></div>
<pre><code>
Call:
lm(formula = sqrt(WattHoursPerKM) ~ MileageKM, data = cleanTeslaBattery)

Coefficients:
(Intercept)    MileageKM  
  1.555e+01   -5.510e-06  </code></pre>
<p>Finally, we left out the correlation coefficient. The call for the correlation coefficient is a little different as it doesn’t use relations <code>cor(x,y, use = &quot;pairwise.complete.obs&quot;, method = &quot;pearson&quot;)</code>. Try the command here for the Mileage and Watt Hours Per KM.</p>
<p>Note that the <code>use</code> option has been specified to omit pairs of correlations where there is an NA, and the <code>method</code> controls the type of correlation.</p>
</div>
<div id="t-tests" class="section level3">
<h3><span class="header-section-number">3.5.2</span> t-tests</h3>
<p>Here is a very quick overview of t-tests. We are going to take a look at the difference in weight gain be smoking and non-smoking mothers in Kings County. We will use data on <a href="Data/KingCounty2001.csv">King County births.</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Kings &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/KingCounty2001.csv&quot;</span>) </code></pre></div>
<p>Take a look at the relationship between <code>smoker</code> and <code>wgain</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(wgain <span class="op">~</span><span class="st"> </span>smoker, <span class="dt">data =</span> Kings )</code></pre></div>
<p><img src="figures/unnamed-chunk-28-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(Kings<span class="op">$</span>smoker)</code></pre></div>
<pre><code>   N    Y 
2325  175 </code></pre>
<p>two-sample <em>t</em>-test syntax follows a simple format <code>t.test(relationship, data, type of alternative)</code> specify the type of alternative, either “greater”, “less” or “two.tailed”, using the <code>alternative</code> option.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(wgain <span class="op">~</span><span class="st"> </span>smoker, <span class="dt">data =</span> Kings, <span class="dt">alternative =</span> <span class="st">&quot;greater&quot;</span>)</code></pre></div>
<pre><code>
    Welch Two Sample t-test

data:  wgain by smoker
t = -0.65319, df = 189.21, p-value = 0.7428
alternative hypothesis: true difference in means is greater than 0
95 percent confidence interval:
 -3.083485       Inf
sample estimates:
mean in group N mean in group Y 
       32.21806        33.09143 </code></pre>
<p>Note that confidence intervals are included, but the alternative should be “two.sided.”</p>
<p>One-sided <em>t</em>-tests require specifying only a single quantitative variable and also specifying the value from the null hypothesis. An example for testing that the mean <code>wgain</code> is different from 9.4 is</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(Kings<span class="op">$</span>wgain, <span class="dt">mu =</span> <span class="fl">9.4</span>, <span class="dt">alt =</span> <span class="st">&quot;two.sided&quot;</span>)</code></pre></div>
<pre><code>
    One Sample t-test

data:  Kings$wgain
t = 85.31, df = 2499, p-value &lt; 2.2e-16
alternative hypothesis: true mean is not equal to 9.4
95 percent confidence interval:
 31.75331 32.80509
sample estimates:
mean of x 
  32.2792 </code></pre>
<p>Other options like the <code>conf.level</code> are described under the help for the function.</p>
<p>Try computing a 90% confidence interval for the mean <code>gest</code>.</p>
</div>
<div id="using-simulation-to-teach-reinforce-concepts" class="section level3">
<h3><span class="header-section-number">3.5.3</span> Using simulation to teach reinforce concepts</h3>
<p>The R community has many powerful interactive tools written in R to help teach R.</p>
<p>We are going to look at one of the tools offered at <a href="http://www.artofstat.com/webapps.html">www.artofstat.com</a></p>
<p>Here is an example of how we might use one of these to help students learn the Central Limit Theorem. These are the instructions I would give students in class:</p>
<ol style="list-style-type: decimal">
<li>Go to the page <a href="https://istats.shinyapps.io/sampdist_cont/">Sampling Distribution Simulator (Art of Stats)</a></li>
<li>Select on of the real population datasets. Sketch the population distribution you are shown. What are the mean and standard deviation (label appropriately)?</li>
<li>Adjust the sample size to 5 and draw 1,000 samples. Sketch the sampling distribution. Repeat this 5 times (reset in between) sketching the sampling distribution. Record the mean and standard deviation of the sampling distribution each time. What do you observe about the sampling distribution?</li>
<li>Adjust the sample size to 10 and draw 1,000 samples. Sketch the sampling distribution. Repeat this 5 times (reset in between) sketching the sampling distribution. Record the mean and standard deviation of the sampling distribution each time. What do you observe about the sampling distribution?</li>
<li>Adjust the sample size to 20 and draw 1,000 samples. Sketch the sampling distribution. Repeat this 5 times (reset in between) sketching the sampling distribution. Record the mean and standard deviation of the sampling distribution each time. What do you observe about the sampling distribution?</li>
<li>Adjust the sample size to 20 and draw 1,000 samples. Sketch the sampling distribution. Repeat this 5 times (reset in between) sketching the sampling distribution. Record the mean and standard deviation of the sampling distribution each time. What do you observe about the sampling distribution?</li>
<li>Adjust the sample size to 100 and draw 1,000 samples. Sketch the sampling distribution. Repeat this 5 times (reset in between) sketching the sampling distribution. Record the mean and standard deviation of the sampling distribution each time. What do you observe about the sampling distribution?</li>
<li>As you increase the sample size, what do you observe about the shape of the sampling distribution? Etc.</li>
</ol>
<p>Here is a link to the <a href="Documents/SamplingDistributionActivity.pdf">full activity</a></p>
</div>
<div id="tools-for-resampling" class="section level3">
<h3><span class="header-section-number">3.5.4</span> Tools for resampling</h3>
<p>We won’t cover this in great depth here, but we will briefly explore what can be done here: <a href="https://istats.shinyapps.io/Boot1samp/">Bootstrapping app</a></p>
</div>
<div id="other-tools-commonly-found-in-introductory-statistics-courses" class="section level3">
<h3><span class="header-section-number">3.5.5</span> Other tools commonly found in introductory statistics courses</h3>
<div id="anova" class="section level4">
<h4><span class="header-section-number">3.5.5.1</span> ANOVA</h4>
<p>We demonstrated <em>t</em>-tests earler, and the syntax for ANOVA is quite similar.</p>
<p><strong>Teaching tip</strong> When teaching non-majors incorporating data from the research of faculty teaching courses from other disciplines can increase student engagement and course relevance.</p>
<p>For this section we are going to work with a dataset from a cancer drug development project that is part of a biology faculty member’s ongoing research at our campus, the data came from one of the student projects. Below is an image of one of the tumors.</p>
<div class="figure">
<img src="Images/Tumor.jpg" alt="CancerTumor" />
<p class="caption">CancerTumor</p>
</div>
<p>The measurements in the file are the percent of tumor growth under various drug treatments. <a href="Data/Tumor.csv">Tumor.csv</a>. Load the data now and inspect the dataset.</p>
<p>Construct a graphical summary of your data using one of the tools from earlier.</p>
<p>We will also construct a numerical summaries of each group using the <code>doBy</code> package. Install and load it now.</p>
<p>For this I define a helper function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">msd =<span class="st"> </span><span class="cf">function</span> (x) {<span class="kw">c</span>(<span class="dt">m =</span> <span class="kw">mean</span>(x), <span class="dt">stdev =</span> <span class="kw">sd</span>(x))}</code></pre></div>
<p>We apply this function using <code>summaryBy</code>.</p>
<p>To run an ANOVA use the command <code>aov()</code> by specifying the relationship and the <code>data</code>, as you did for summarizing the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod =<span class="st"> </span><span class="kw">aov</span>(Growth <span class="op">~</span><span class="st"> </span>Treatment, <span class="dt">data =</span> Tumor)</code></pre></div>
<p>Note that there is something missing that most intro stats students are asked for, what is it?</p>
<p>This can be fixed by wrapping the <code>aov</code> command with a <code>summary()</code>. Try it.</p>
<p>Post-hoc tests can be run by saving the ANOVA model to a variable and then passing it to <code>TukeyHSD()</code>.</p>
<p>Try it here:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">TukeyHSD</span>(mod)</code></pre></div>
<pre><code>  Tukey multiple comparisons of means
    95% family-wise confidence level

Fit: aov(formula = Growth ~ Treatment, data = Tumor)

$Treatment
                        diff          lwr          upr     p adj
Control-Avastin  0.002222222 -0.029180472  0.033624916 0.9976809
Tor+Ava-Avastin -0.037222222 -0.068624916 -0.005819528 0.0137317
Torisel-Avastin -0.004444444 -0.035847138  0.026958250 0.9821827
Tor+Ava-Control -0.039444444 -0.070847138 -0.008041750 0.0080067
Torisel-Control -0.006666667 -0.038069361  0.024736027 0.9437365
Torisel-Tor+Ava  0.032777778  0.001375084  0.064180472 0.0374652</code></pre>
<p>There are other functions for the other types of post-hoc tests.</p>
</div>
</div>
<div id="paired-t-test" class="section level3">
<h3><span class="header-section-number">3.5.6</span> Paired t-test</h3>
<p>Paired t-tests require data in the wide format, that is two columns side by side, perhaps like this</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pairdat =<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">pre=</span><span class="kw">c</span>(<span class="dv">23</span>,<span class="dv">20</span>,<span class="dv">30</span>,<span class="dv">29</span>),<span class="dt">post=</span><span class="kw">c</span>(<span class="dv">25</span>,<span class="dv">21</span>,<span class="dv">27</span>,<span class="dv">31</span>))
pairdat</code></pre></div>
<pre><code>  pre post
1  23   25
2  20   21
3  30   27
4  29   31</code></pre>
<p>Note this is for example only, not for validity.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(pairdat<span class="op">$</span>pre, pairdat<span class="op">$</span>post, <span class="dt">paired=</span><span class="ot">TRUE</span>)</code></pre></div>
<pre><code>
    Paired t-test

data:  pairdat$pre and pairdat$post
t = -0.42008, df = 3, p-value = 0.7027
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -4.287869  3.287869
sample estimates:
mean of the differences 
                   -0.5 </code></pre>
<div id="testing-for-proportions" class="section level4">
<h4><span class="header-section-number">3.5.6.1</span> Testing for Proportions</h4>
<p>For simplicity we are going to continue with the <code>cleanTeslaBattery</code>. Suppose we want to look at the relationship between <code>Country</code> and <code>Model.</code></p>
<p>Create a two-way table and a bar plot for these variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cleanTeslaBattery =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/cleanTeslaBattery.csv&quot;</span>)
tbl =<span class="st"> </span><span class="kw">table</span>(cleanTeslaBattery<span class="op">$</span>Location,cleanTeslaBattery<span class="op">$</span>Model)
tbl</code></pre></div>
<pre><code>                                 
                                  Model 3 LR Model S 100D Model S 60
  Asia Pacific &amp; Europe (excl UK)          0            3         22
  Canada                                   0            0          3
  UK                                       0            0          1
  USA                                      4            2         20
                                 
                                  Model S 60D Model S 70 Model S 70D
  Asia Pacific &amp; Europe (excl UK)           0          8          99
  Canada                                    1          0           0
  UK                                        1          0           0
  USA                                       4          0           4
                                 
                                  Model S 75 Model S 75D Model S 85
  Asia Pacific &amp; Europe (excl UK)         28          20        376
  Canada                                   1           0         20
  UK                                       0           1          7
  USA                                     10           7         72
                                 
                                  Model S 85D Model S 90 Model S 90D
  Asia Pacific &amp; Europe (excl UK)          88          1          90
  Canada                                    9          2           2
  UK                                        2          0           0
  USA                                      13          0          15
                                 
                                  Model S 90D 2015 Model S P100D
  Asia Pacific &amp; Europe (excl UK)                3             8
  Canada                                         0             0
  UK                                             0             0
  USA                                           10             0
                                 
                                  Model S P85 Model S P85+ Model S P85D
  Asia Pacific &amp; Europe (excl UK)         141           45           75
  Canada                                    5            1            1
  UK                                        0            0            0
  USA                                      32            2           15
                                 
                                  Model S P90D Model X 100D Model X 60D
  Asia Pacific &amp; Europe (excl UK)            4            7           0
  Canada                                     0            1           1
  UK                                         0            0           0
  USA                                        3            4           0
                                 
                                  Model X 75D Model X 90D Model X P90D
  Asia Pacific &amp; Europe (excl UK)           4          11            1
  Canada                                    0           0            0
  UK                                        0           0            0
  USA                                       0           5            0
                                 
                                  Unspecified 85 kWh
  Asia Pacific &amp; Europe (excl UK)                 24
  Canada                                           0
  UK                                               0
  USA                                              0</code></pre>
<p>Chi-square is as simple as running <code>chisq.test()</code> on the two-way table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">chisq.test</span>(tbl)</code></pre></div>
<pre><code>
    Pearson&#39;s Chi-squared test

data:  tbl
X-squared = 254.16, df = 69, p-value &lt; 2.2e-16</code></pre>
<p>Tests for proportions require the <code>prop.test</code> command and require just inputting the desired counts and/or population proportions. We won’t do an application here, but if 23 of 120 have a trait and we would like to see if the proprtion is significantly greater than 0.15, we might use the command</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="dv">23</span>,<span class="dv">120</span>, <span class="dt">p=</span><span class="fl">0.15</span>, <span class="dt">alternative =</span> <span class="st">&quot;greater&quot;</span>)</code></pre></div>
<pre><code>
    1-sample proportions test with continuity correction

data:  23 out of 120, null probability 0.15
X-squared = 1.3235, df = 1, p-value = 0.125
alternative hypothesis: true p is greater than 0.15
95 percent confidence interval:
 0.136025 1.000000
sample estimates:
        p 
0.1916667 </code></pre>
<p>As with the t-tests, notice that the confidence interval is an added bonus, but requires the two-sided option.</p>
<p>A two-sample test for proportions may be run similarly with a slight modification:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">c</span>(<span class="dv">31</span>,<span class="dv">40</span>),<span class="kw">c</span>(<span class="dv">60</span>,<span class="dv">85</span>), <span class="dt">alternative =</span> <span class="st">&quot;greater&quot;</span>)</code></pre></div>
<pre><code>
    2-sample test for equality of proportions with continuity
    correction

data:  c(31, 40) out of c(60, 85)
X-squared = 0.14289, df = 1, p-value = 0.3527
alternative hypothesis: greater
95 percent confidence interval:
 -0.1066671  1.0000000
sample estimates:
   prop 1    prop 2 
0.5166667 0.4705882 </code></pre>
<p>where the first list specifies the counts with the trait in each of the two groups and the second list consists of the sample sizes for each of the two groups.</p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rmarkdown-and-reproducible-documentation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="r-across-the-curriculum.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
